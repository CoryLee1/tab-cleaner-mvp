# Nixpacks 配置（Railway 使用）
# 解决 PEP 668 限制：Nix 环境中的 Python 是外部管理的

[phases.setup]
# 指定需要的 Nix 包
nixPkgs = ["python312", "uv"]

[phases.build]
# 使用 uv 直接装到系统 Python（--system 标志很关键）
cmds = [
  "uv pip install --system -e .",
  "playwright install chromium || echo 'Playwright installation skipped'"
]

[start]
# 直接运行 uvicorn（不需要 uv run）
cmd = "uvicorn main:app --host 0.0.0.0 --port $PORT"

